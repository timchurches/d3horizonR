// https://github.com/kmandov/d3-horizon-chart Version 0.0.6. Copyright 2016 Kiril Mandov.
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("d3-selection"),require("d3-scale"),require("d3-axis"),require("d3-array")):"function"==typeof define&&define.amd?define(["d3-selection","d3-scale","d3-axis","d3-array"],e):e(t.d3,t.d3,t.d3,t.d3)}(this,function(t,e,n,r){"use strict";function a(){function a(e){var a=t.select(this);o=(f+d)*e.length,y=a.append("canvas"),y.attr("width",o).attr("height",c),a.append("span").attr("class","title").text(g),a.append("span").attr("class","value");var m=y.node().getContext("2d"),b=p||r.extent(e),q=Math.max(-b[0],b[1]);x.domain([0,q]),h=n.axisTop(v).ticks(5),m.clearRect(0,0,o,c);var z=f+d,M=~~Math.max(0,-u/z),R=~~Math.min(e.length,M+o/z);if(!(M>e.length)){for(var w=!1,j=0;j<l;j++){m.fillStyle=i[l+j];var k=(j+1-l)*c;x.range([l*c+k,k]);for(var C,L=M;L<R;L++)C=e[L],C<=0?w=!0:void 0!==C&&m.fillRect(u+L*z,x(C),f,x(0)-x(C))}if(w)for("offset"===s&&(m.translate(0,c),m.scale(1,-1)),j=0;j<l;j++){m.fillStyle=i[l-j-1],k=(j+1-l)*c,x.range([l*c+k,k]);for(var S,T=M;T<R;T++)(S=e[T])>=0||m.fillRect(u+T*z,x(-S),f,x(0)-x(-S))}}}var i=["#313695","#4575b4","#74add1","#abd9e9","#fee090","#fdae61","#f46d43","#d73027"],l=i.length>>1,o=1e3,c=30,u=0,f=1,d=0,s="offset",h=null,g=null,p=null,v=null,x=e.scaleLinear().range([0,c]),y=null;return a.axis=function(t){return arguments.length?(h=t,a):h},a.canvas=function(t){return arguments.length?(y=t,a):y},a.colors=function(t){return arguments.length?(i=t,l=i.length>>1,a):i},a.height=function(t){return arguments.length?(c=t,a):c},a.step=function(t){return arguments.length?(f=t,a):f},a.spacing=function(t){return arguments.length?(d=t,a):d},a.title=function(t){return arguments.length?(g=t,a):g},a.mode=function(t){return arguments.length?(s=t,a):s},a.extent=function(t){return arguments.length?(p=t,a):p},a.offsetX=function(t){return arguments.length?(u=t,a):u},a.indexExtent=function(){var t=f+d,e=-u/t;return[e,e+o/t]},a}global.HTMLWidgets.widget({name:"d3horizon",type:"output",factory:function(e,n,r){return{chart:null,renderValue:function(n){var r;this.chart?r=this.chart:this.chart=r=a(),Object.keys(n.options).map(function(t){if(r[t])try{r[t](n.options[t])}catch(t){}}),r.step(e.getBoundingClientRect().width/n.data[0].length),t.select(e).selectAll(".horizon").data(n.data).enter().append("div").attr("class","horizon").each(r)},resize:function(t,e){}}}})});