$(preamble)
$(preamble)(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("d3-selection"),require("d3-scale"),require("d3-axis"),require("d3-array")):"function"==typeof define&&define.amd?define(["exports","d3-selection","d3-scale","d3-axis","d3-array"],t):t(e.d3=e.d3||{},e.d3,e.d3,e.d3,e.d3)}(this,function(e,t,n,r,a){"use strict";function l(){function e(e){var n=t.select(this);o=(d+c)*e.length,m=n.append("canvas"),m.attr("width",o).attr("height",f),n.append("span").attr("class","title").text(g),n.append("span").attr("class","value");var y=m.node().getContext("2d"),b=p||a.extent(e),q=Math.max(-b[0],b[1]);v.domain([0,q]),h=r.axisTop(x).ticks(5),y.clearRect(0,0,o,f);var M=d+c,R=~~Math.max(0,-u/M),j=~~Math.min(e.length,R+o/M);if(!(R>e.length)){for(var C=!1,S=0;S<i;S++){y.fillStyle=l[i+S];var _=(S+1-i)*f;v.range([i*f+_,_]);for(var k,w=R;w<j;w++)k=e[w],k<=0?C=!0:void 0!==k&&y.fillRect(u+w*M,v(k),d,v(0)-v(k))}if(C)for("offset"===s&&(y.translate(0,f),y.scale(1,-1)),S=0;S<i;S++){y.fillStyle=l[i-S-1],_=(S+1-i)*f,v.range([i*f+_,_]);for(var z,E=R;E<j;E++)(z=e[E])>=0||y.fillRect(u+E*M,v(-z),d,v(0)-v(-z))}}}var l=["#313695","#4575b4","#74add1","#abd9e9","#fee090","#fdae61","#f46d43","#d73027"],i=l.length>>1,o=1e3,f=30,u=0,d=1,c=0,s="offset",h=null,g=null,p=null,x=null,v=n.scaleLinear().range([0,f]),m=null;return e.axis=function(t){return arguments.length?(h=t,e):h},e.canvas=function(t){return arguments.length?(m=t,e):m},e.colors=function(t){return arguments.length?(l=t,i=l.length>>1,e):l},e.height=function(t){return arguments.length?(f=t,e):f},e.step=function(t){return arguments.length?(d=t,e):d},e.spacing=function(t){return arguments.length?(c=t,e):c},e.title=function(t){return arguments.length?(g=t,e):g},e.mode=function(t){return arguments.length?(s=t,e):s},e.extent=function(t){return arguments.length?(p=t,e):p},e.offsetX=function(t){return arguments.length?(u=t,e):u},e.indexExtent=function(){var e=d+c,t=-u/e;return[t,t+o/e]},e}e.horizonChart=l,Object.defineProperty(e,"__esModule",{value:!0})}));